/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  containsBytes,
  getU8Encoder,
  type Address,
  type ReadonlyUint8Array,
} from "@solana/kit";
import {
  type ParsedAcceptThreadDataInstruction,
  type ParsedAddThreadDataInstruction,
  type ParsedInitUserDataInstruction,
  type ParsedRemoveThreadDataInstruction,
  type ParsedSendDmMessageDataInstruction,
} from "../instructions";

export const SOLCRYPT_PROGRAM_ADDRESS =
  "GRLu2hKaAiMbxpkAM1HeXzks9YeGuz18SEgXEizVvPqX" as Address<"GRLu2hKaAiMbxpkAM1HeXzks9YeGuz18SEgXEizVvPqX">;

export enum SolcryptAccount {
  UserAccount,
}

export function identifySolcryptAccount(
  account: { data: ReadonlyUint8Array } | ReadonlyUint8Array,
): SolcryptAccount {
  const data = "data" in account ? account.data : account;
  if (containsBytes(data, getU8Encoder().encode(0), 0)) {
    return SolcryptAccount.UserAccount;
  }
  throw new Error(
    "The provided account could not be identified as a solcrypt account.",
  );
}

export enum SolcryptInstruction {
  SendDmMessageData,
  InitUserData,
  AddThreadData,
  AcceptThreadData,
  RemoveThreadData,
}

export function identifySolcryptInstruction(
  instruction: { data: ReadonlyUint8Array } | ReadonlyUint8Array,
): SolcryptInstruction {
  const data = "data" in instruction ? instruction.data : instruction;
  if (containsBytes(data, getU8Encoder().encode(0), 0)) {
    return SolcryptInstruction.SendDmMessageData;
  }
  if (containsBytes(data, getU8Encoder().encode(1), 0)) {
    return SolcryptInstruction.InitUserData;
  }
  if (containsBytes(data, getU8Encoder().encode(2), 0)) {
    return SolcryptInstruction.AddThreadData;
  }
  if (containsBytes(data, getU8Encoder().encode(3), 0)) {
    return SolcryptInstruction.AcceptThreadData;
  }
  if (containsBytes(data, getU8Encoder().encode(4), 0)) {
    return SolcryptInstruction.RemoveThreadData;
  }
  throw new Error(
    "The provided instruction could not be identified as a solcrypt instruction.",
  );
}

export type ParsedSolcryptInstruction<
  TProgram extends string = "GRLu2hKaAiMbxpkAM1HeXzks9YeGuz18SEgXEizVvPqX",
> =
  | ({
    instructionType: SolcryptInstruction.SendDmMessageData;
  } & ParsedSendDmMessageDataInstruction<TProgram>)
  | ({
    instructionType: SolcryptInstruction.InitUserData;
  } & ParsedInitUserDataInstruction<TProgram>)
  | ({
    instructionType: SolcryptInstruction.AddThreadData;
  } & ParsedAddThreadDataInstruction<TProgram>)
  | ({
    instructionType: SolcryptInstruction.AcceptThreadData;
  } & ParsedAcceptThreadDataInstruction<TProgram>)
  | ({
    instructionType: SolcryptInstruction.RemoveThreadData;
  } & ParsedRemoveThreadDataInstruction<TProgram>);
